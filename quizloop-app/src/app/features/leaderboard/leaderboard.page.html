<ion-header class="ion-no-border">
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button defaultHref="/home" color="primary"></ion-back-button>
        </ion-buttons>
        <ion-title class="ql-h3">{{ 'LEADERBOARD.TITLE' | translate }}</ion-title>
    </ion-toolbar>
    <ion-segment [(ngModel)]="category" (ionChange)="onCategoryChange()" mode="md">
        <ion-segment-button value="daily">
            <ion-label>{{ 'LEADERBOARD.DAILY' | translate }}</ion-label>
        </ion-segment-button>
        <ion-segment-button value="weekly">
            <ion-label>{{ 'LEADERBOARD.WEEKLY' | translate }}</ion-label>
        </ion-segment-button>
        <ion-segment-button value="alltime">
            <ion-label>{{ 'LEADERBOARD.ALL_TIME' | translate }}</ion-label>
        </ion-segment-button>
    </ion-segment>
</ion-header>

<ion-content [fullscreen]="true" class="ql-page">
    <div class="doc-body ql-animate-fade-in">
        <p *ngIf="isLoading()" class="ql-caption lb-loading">Loading rankings...</p>

        <p *ngIf="!isLoading() && entries().length === 0" class="ql-caption lb-empty">
            No ranking data yet.
        </p>

        <div *ngIf="!isLoading() && entries().length > 0">
            <div class="lb-podium">
                <div class="lb-podium-item">
                    <div class="lb-medal lb-medal-silver"></div>
                    <span class="ql-caption">{{ formatTopLabel(1) }}</span>
                </div>
                <div class="lb-podium-item">
                    <div class="lb-medal lb-medal-gold"></div>
                    <span class="ql-h3">{{ formatTopLabel(0) }}</span>
                </div>
                <div class="lb-podium-item">
                    <div class="lb-medal lb-medal-bronze"></div>
                    <span class="ql-caption">{{ formatTopLabel(2) }}</span>
                </div>
            </div>

            <ion-list lines="none" class="ion-no-padding lb-list">
                <div *ngFor="let entry of remainingEntries()" class="ql-card lb-entry">
                    <span class="ql-h3 lb-rank">{{ entry.rank }}</span>
                    <div class="lb-avatar"></div>
                    <div class="lb-entry-body">
                        <span class="ql-body">{{ entry.userId }}</span>
                        <p class="ql-caption">{{ entry.totalScore | number }} pts</p>
                    </div>
                </div>
            </ion-list>
        </div>
    </div>
</ion-content>
